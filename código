# Archivo: app.py

import streamlit as st
import pandas as pd
from sklearn.linear_model import LogisticRegression
import matplotlib.pyplot as plt

# ğŸ¨ Inyectar CSS para cambiar fondo de la pÃ¡gina
st.markdown(
    """
    <style>
    .stApp {
        background-color: #f0f8ff;
        background-image: linear-gradient(120deg, #f0f8ff, #e6f7ff, #ccf2ff);
        background-size: cover;
    }
    </style>
    """,
    unsafe_allow_html=True
)

# ğŸ¯ TÃ­tulo e Imagen
st.title("ğŸ¯ Â¡PredicciÃ³n de tu AprobaciÃ³n Escolar! ğŸ¯")
st.image("https://cdn.pixabay.com/photo/2016/03/31/19/17/success-1297395_1280.png", width=400)
st.subheader("Descubre si lograrÃ¡s aprobar tus exÃ¡menes ğŸ“ğŸ’¥")

# ğŸ”¢ Crear datos histÃ³ricos
datos = pd.DataFrame({
    'Examen1': [34.62, 30.28, 35.84, 60.18, 79.03, 45.08, 61.18, 75.29, 45.45, 55.32],
    'Examen2': [78.02, 43.89, 72.90, 86.30, 75.34, 56.31, 96.51, 90.45, 65.32, 67.89],
    'Aprobado': [0, 0, 0, 1, 1, 0, 1, 1, 0, 1]
})

# ğŸ§  Entrenar modelo
X = datos[['Examen1', 'Examen2']]
y = datos['Aprobado']
modelo = LogisticRegression()
modelo.fit(X, y)

# ğŸ“š Inputs del usuario
st.markdown("### Ingresa tus calificaciones:")
examen1 = st.number_input("ğŸ“˜ Examen 1:", min_value=0.0, max_value=100.0, value=50.0)
examen2 = st.number_input("ğŸ“— Examen 2:", min_value=0.0, max_value=100.0, value=50.0)

# ğŸš€ BotÃ³n para predecir
if st.button("ğŸš€ Predecir mi resultado"):
    nueva_nota = [[examen1, examen2]]
    prediccion = modelo.predict(nueva_nota)
    probabilidad = modelo.predict_proba(nueva_nota)[0][1]

    st.markdown("## ğŸ“‹ Resultados:")
    st.write(f"**Tus calificaciones:** Examen 1 = {examen1}, Examen 2 = {examen2}")
    st.write(f"**Probabilidad de aprobar:** {probabilidad:.2%}")

    # Mensaje motivacional
    if prediccion[0] == 1:
        if probabilidad > 0.8:
            st.success("âœ… Â¡SÃºper estrella! Â¡Aprobaste con excelente probabilidad! ğŸŒŸğŸ‰")
        else:
            st.success("âœ… Â¡Aprobaste! Â¡Sigue esforzÃ¡ndote! ğŸš€")
    else:
        if probabilidad > 0.4:
            st.warning("âš ï¸ Â¡Casi lograste aprobar! Â¡No te rindas! ğŸ”¥")
        else:
            st.error("âŒ No aprobaste esta vez, Â¡pero puedes mejorar! ğŸ’ª")

    # ğŸ“ˆ Graficar la probabilidad
    fig, ax = plt.subplots()
    ax.bar(['Probabilidad de Aprobar', 'Probabilidad de No Aprobar'], [probabilidad, 1 - probabilidad], color=['green', 'red'])
    ax.set_ylim(0, 1)
    ax.set_ylabel('Probabilidad')
    ax.set_title('ğŸ“Š Resultado Visual de tu PredicciÃ³n')
    st.pyplot(fig)

# ğŸ Footer
st.markdown("---")
st.markdown("AplicaciÃ³n desarrollada por **Leonardo** ğŸš€ | Â¡Sigue soÃ±ando en grande! ğŸŒŸ")

